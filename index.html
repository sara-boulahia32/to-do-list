<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <link href="output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Istok+Web:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <style>
        .picture-cover{
            background-image: url(image/a614b8c617c651ff2832e109ce447de0\ 1.png);
            background-position: center;
            background-size: cover;
            width: 100%;
            height: 40vh;
        }
        
        
        .dropdown-menu {
            max-height: 200px;
            overflow-y: auto;
            overflow-x: hidden;
        }
        .task {
            border-radius: .35rem;
            border: 1px solid;
            border-left-width: 7.5px;
            padding: .75rem 1rem;
            margin-bottom: 1.3rem;

            & h6 {
                color: rgba(0, 0, 0, .7);
                word-break: break-all;
            }
        }
        .w-fit {
            width: fit-content;
        }

        body {
            position: relative;
            min-height: 100vh;
        }
        

    </style>
</head>

<body class="relative bg-customCream px-[100px]">
    <section >
        <form id="createTaskPopup" class="absolute w-[400px] flex flex-col bg-customBrown p-8 rounded-3xl mt-[300px] hidden ">
            <div id="closeIcon" class="flex justify-end">
                <span role="button" class="font-bold cursor-pointer">x</span>
            </div>
            <p id="alert" class="hidden text-red-500 text-center py-1">Please fill all the fields.</p>
            
            <div class="mb-4">
                <label for="title">Title:</label>
                <input type="text" name="title" id="title" 
                    class="w-full border border-customGray shadow-lg rounded-3xl py-2 pl-2 h-12 focus:outline-none focus:ring-2 focus:ring-black">    
            </div>

            <div class="mb-4">
                <label for="description">Description:</label>
                <textarea id="description" rows="3"
                    class="w-full border border-customGray shadow-lg rounded-3xl py-2 pl-2 h-[100px] focus:outline-none focus:ring-2 focus:ring-black"></textarea>
            </div>
            
            <div class="mb-3">
                <div class="flex gap-4">
                    <div id="start-date-menu" class="relative">
                        <button class="w-[110px] bg-white border border-black rounded-xl px-2 py-1">
                            Start Date
                        </button>
                        <div class="hidden absolute mt-1 w-full bg-white border rounded-lg shadow-lg">
                        </div>
                    </div>
                    <div id="due-date-menu" class="relative">
                        <button class="w-[110px] bg-white border border-black rounded-xl px-2 py-1">
                            Due Date
                        </button>
                        <div class="hidden absolute mt-1 w-full bg-white border rounded-lg shadow-lg">
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <div class="flex gap-4">
                    <div id="priority-menu" class="relative">
                        <button class="w-[110px] bg-white border border-black rounded-xl px-2 py-1">
                            Priority
                        </button>
                        <div class="hidden absolute mt-1 w-full bg-white border rounded-lg shadow-lg">
                            <button value="0" class="block w-full px-4 py-2 hover:bg-gray-100">P1</button>
                            <button value="1" class="block w-full px-4 py-2 hover:bg-gray-100">P2</button>
                            <button value="2" class="block w-full px-4 py-2 hover:bg-gray-100">P3</button>
                        </div>
                    </div>
                    <div id="state-menu" class="relative">
                        <button class="w-[110px] bg-white border border-black rounded-xl px-2 py-1">
                            State
                        </button>
                        <div class="hidden absolute mt-1 w-full bg-white border rounded-lg shadow-lg">
                            <button value="0" class="block w-full px-4 py-2 hover:bg-gray-100">To Do</button>
                            <button value="1" class="block w-full px-4 py-2 hover:bg-gray-100">Doing</button>
                            <button value="2" class="block w-full px-4 py-2 hover:bg-gray-100">Completed</button>
                        </div>
                    </div>
                </div>
            </div>

            <button class="w-fit px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">Save</button>
        </form>
    </section>

    <section class="picture-cover"></section>
    <section class=" my-[50px]">
        <div class="flex justify-between mb-10">
            <div class="relative">
                <div class="col-8">
                    <input type="text" placeholder="Search task.."
                    class="border border-customGray shadow-lg rounded-3xl py-2 pl-2 h-12 focus:outline-none focus:ring-2 focus:ring-customBrown">
                </div>
                <div class="absolute inset-y-0 right-3 pl-3 flex items-center pointer-events-none">
                    <svg class="h-5 w-5 text-gray-400" fill="none" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
            <button id="openAjoute" class="bg-customBrown hover:scale-110 font-bold rounded-3xl w-[40px] h-[40px] ">+</button>
        </div>

        <div class="grid grid-cols-3 gap-[50px]">
            <div>
                <h2 class="text-lg font-medium text-customBlue mb-1">To do | <span id="todo-count">0</span></h2>
                <hr class="border-customBlue mb-5">
                <div id="todo-tasks">
                    </div>
            </div>
            <div>
                <h2 class="text-lg font-medium text-customGreen mb-1">In progress | <span id="inprogress-count">0</span></h2>
                <hr class="border-customGreen mb-5">
                <div id="inprogress-tasks">
                    </div>
            </div>
            <div>
                <h2 class="text-lg font-medium text-customPink mb-1">Done | <span id="done-count">0</span></h2>
                <hr class="border-customPink mb-5">
                <div id="done-tasks">
                    </div>
            </div>
        </div>
    </section>
<script>
    // DOM Elements

    
    const createTaskPopup = document.getElementById('createTaskPopup');
    const addTaskButton = document.querySelector('.bg-customBrown');
    const closeButton = document.querySelector('#closeIcon span');
    const form = document.querySelector('form');
    const alert = document.getElementById('alert');
    
    // Task containers
    const todoTasks = document.getElementById('todo-tasks');
    const inprogressTasks = document.getElementById('inprogress-tasks');
    const doneTasks = document.getElementById('done-tasks');
    
    // Counters
    const todoCount = document.getElementById('todo-count');
    const inprogressCount = document.getElementById('inprogress-count');
    const doneCount = document.getElementById('done-count');
    
    // Toggle popup
    const openAjoute = document.getElementById("openAjoute").addEventListener("click",()=>{
        createTaskPopup.classList.remove('hidden');
    })
    
    
    closeButton.addEventListener('click', () => {
        createTaskPopup.classList.add('hidden');
        form.reset();
        alert.classList.add('hidden');
    });
    
    // Handle dropdown menus
    const dropdowns = ['priority-menu', 'state-menu'];
    dropdowns.forEach(id => {
        const menu = document.getElementById(id);
        const button = menu.querySelector('button');
        const options = menu.querySelector('div');
    
        button.addEventListener('click', (e) => {
            e.preventDefault();
            options.classList.toggle('hidden');
        });
    
        options.querySelectorAll('button').forEach(option => {
            option.addEventListener('click', (e) => {
                e.preventDefault();
                button.textContent = option.textContent;
                options.classList.add('hidden');
            });
        });
    });
    
    // Form submission
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const title = document.getElementById('title').value;
        const description = document.getElementById('description').value;
        const priority = document.querySelector('#priority-menu button').textContent;
        const state = document.querySelector('#state-menu button').textContent;
        
        if (!title || !description || priority === 'Priority' || state === 'State') {
            alert.classList.remove('hidden');
            return;
        }
    
        createTask(title, description, priority, state);
        createTaskPopup.classList.add('hidden');
        form.reset();
        alert.classList.add('hidden');
    });
    
    function createTask(title, description, priority, state) {
        const task = document.createElement('div');
        task.className = 'task';
        
        // Set border color based on priority
        const borderColor = {
            'P1': 'border-red',
            'P2': 'border-orange',
            'P3': 'border-green'
        }[priority];
        
        task.classList.add(borderColor);
    
        task.innerHTML = `
            <h3 class="font-bold mb-2">${title}</h3>
            <h6 class="text-sm mb-3">${description}</h6>
            <div class="flex justify-between items-center">
                <span class="text-xs">${priority}</span>
                <select class="text-xs border rounded px-1">
                    <option ${state === 'To Do' ? 'selected' : ''}>To Do</option>
                    <option ${state === 'Doing' ? 'selected' : ''}>Doing</option>
                    <option ${state === 'Completed' ? 'selected' : ''}>Completed</option>
                </select>
            </div>
        `;
    
        // Add task to appropriate container
        const container = {
            'To Do': todoTasks,
            'Doing': inprogressTasks,
            'Completed': doneTasks
        }[state];
    
        container.appendChild(task);
        updateCounts();
    
        // Handle state changes
        const select = task.querySelector('select');
        select.addEventListener('change', () => {
            const newContainer = {
                'To Do': todoTasks,
                'Doing': inprogressTasks,
                'Completed': doneTasks
            }[select.value];
            
            newContainer.appendChild(task);
            updateCounts();
        });
    }
    
    function updateCounts() {
        todoCount.textContent = todoTasks.children.length;
        inprogressCount.textContent = inprogressTasks.children.length;
        doneCount.textContent = doneTasks.children.length;
    }
    
    // Search functionality
    const searchInput = document.querySelector('input[type="text"]');
    searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase();
        const tasks = document.querySelectorAll('.task');
    
        tasks.forEach(task => {
            const title = task.querySelector('h3').textContent.toLowerCase();
            const description = task.querySelector('h6').textContent.toLowerCase();
            
            if (title.includes(searchTerm) || description.includes(searchTerm)) {
                task.style.display = '';
            } else {
                task.style.display = 'none';
            }
        });
    });</script>
    
</body>

</html>